{"ast":null,"code":"\"use strict\";\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) {\n    if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n  }\n  result[\"default\"] = mod;\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar React = __importStar(require(\"react\"));\n\nvar react_native_1 = require(\"react-native-web/dist/index\");\n\nvar useKey_1 = require(\"./hooks/useKey\");\n\nvar Manager_1 = require(\"./Manager\");\n\nexports.Context = React.createContext(null);\n\nexports.Host = function (_ref) {\n  var children = _ref.children,\n      style = _ref.style;\n  var managerRef = React.useRef(null);\n  var queue = [];\n\n  var _useKey_1$useKey = useKey_1.useKey(),\n      generateKey = _useKey_1$useKey.generateKey,\n      removeKey = _useKey_1$useKey.removeKey;\n\n  React.useEffect(function () {\n    var _a, _b, _c;\n\n    while (queue.length && managerRef.current) {\n      var action = queue.pop();\n\n      if (action) {\n        switch (action.type) {\n          case 'mount':\n            (_a = managerRef.current) === null || _a === void 0 ? void 0 : _a.mount(action.key, action.children);\n            break;\n\n          case 'update':\n            (_b = managerRef.current) === null || _b === void 0 ? void 0 : _b.update(action.key, action.children);\n            break;\n\n          case 'unmount':\n            (_c = managerRef.current) === null || _c === void 0 ? void 0 : _c.unmount(action.key);\n            break;\n        }\n      }\n    }\n  }, []);\n\n  var mount = function mount(children) {\n    var key = generateKey();\n\n    if (managerRef.current) {\n      managerRef.current.mount(key, children);\n    } else {\n      queue.push({\n        type: 'mount',\n        key: key,\n        children: children\n      });\n    }\n\n    return key;\n  };\n\n  var update = function update(key, children) {\n    if (managerRef.current) {\n      managerRef.current.update(key, children);\n    } else {\n      var op = {\n        type: 'mount',\n        key: key,\n        children: children\n      };\n      var index = queue.findIndex(function (o) {\n        return o.type === 'mount' || o.type === 'update' && o.key === key;\n      });\n\n      if (index > -1) {\n        queue[index] = op;\n      } else {\n        queue.push(op);\n      }\n    }\n  };\n\n  var unmount = function unmount(key) {\n    if (managerRef.current) {\n      managerRef.current.unmount(key);\n      removeKey(key);\n    } else {\n      queue.push({\n        type: 'unmount',\n        key: key\n      });\n    }\n  };\n\n  return React.createElement(exports.Context.Provider, {\n    value: {\n      mount: mount,\n      update: update,\n      unmount: unmount\n    }\n  }, React.createElement(react_native_1.View, {\n    style: [{\n      flex: 1\n    }, style],\n    collapsable: false,\n    pointerEvents: \"box-none\"\n  }, children), React.createElement(Manager_1.Manager, {\n    ref: managerRef\n  }));\n};","map":{"version":3,"sources":["/Users/rithikpothuganti/Telescope-app/Telescope/node_modules/react-native-portalize/lib/Host.js"],"names":["__importStar","mod","__esModule","result","k","Object","hasOwnProperty","call","defineProperty","exports","value","React","require","useKey_1","Manager_1","Context","createContext","Host","children","style","managerRef","useRef","queue","useKey","generateKey","removeKey","useEffect","_a","_b","_c","length","current","action","pop","type","mount","key","update","unmount","push","op","index","findIndex","o","createElement","Provider","react_native_1","View","flex","collapsable","pointerEvents","Manager","ref"],"mappings":"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","sourcesContent":["\"use strict\";\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result[\"default\"] = mod;\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst React = __importStar(require(\"react\"));\nconst react_native_1 = require(\"react-native\");\nconst useKey_1 = require(\"./hooks/useKey\");\nconst Manager_1 = require(\"./Manager\");\nexports.Context = React.createContext(null);\nexports.Host = ({ children, style }) => {\n    const managerRef = React.useRef(null);\n    const queue = [];\n    const { generateKey, removeKey } = useKey_1.useKey();\n    React.useEffect(() => {\n        var _a, _b, _c;\n        while (queue.length && managerRef.current) {\n            const action = queue.pop();\n            if (action) {\n                switch (action.type) {\n                    case 'mount':\n                        (_a = managerRef.current) === null || _a === void 0 ? void 0 : _a.mount(action.key, action.children);\n                        break;\n                    case 'update':\n                        (_b = managerRef.current) === null || _b === void 0 ? void 0 : _b.update(action.key, action.children);\n                        break;\n                    case 'unmount':\n                        (_c = managerRef.current) === null || _c === void 0 ? void 0 : _c.unmount(action.key);\n                        break;\n                }\n            }\n        }\n    }, []);\n    const mount = (children) => {\n        const key = generateKey();\n        if (managerRef.current) {\n            managerRef.current.mount(key, children);\n        }\n        else {\n            queue.push({ type: 'mount', key, children });\n        }\n        return key;\n    };\n    const update = (key, children) => {\n        if (managerRef.current) {\n            managerRef.current.update(key, children);\n        }\n        else {\n            const op = { type: 'mount', key, children };\n            const index = queue.findIndex(o => o.type === 'mount' || (o.type === 'update' && o.key === key));\n            if (index > -1) {\n                queue[index] = op;\n            }\n            else {\n                queue.push(op);\n            }\n        }\n    };\n    const unmount = (key) => {\n        if (managerRef.current) {\n            managerRef.current.unmount(key);\n            removeKey(key);\n        }\n        else {\n            queue.push({ type: 'unmount', key });\n        }\n    };\n    return (React.createElement(exports.Context.Provider, { value: { mount, update, unmount } },\n        React.createElement(react_native_1.View, { style: [{ flex: 1 }, style], collapsable: false, pointerEvents: \"box-none\" }, children),\n        React.createElement(Manager_1.Manager, { ref: managerRef })));\n};\n"]},"metadata":{},"sourceType":"script"}