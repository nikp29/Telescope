{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _View = _interopRequireDefault(require(\"react-native-web/dist/exports/View\"));\n\nvar _ScrollView = _interopRequireDefault(require(\"react-native-web/dist/exports/ScrollView\"));\n\nvar _StyleSheet = _interopRequireDefault(require(\"react-native-web/dist/exports/StyleSheet\"));\n\nvar _Text = _interopRequireDefault(require(\"react-native-web/dist/exports/Text\"));\n\nvar _TouchableOpacity = _interopRequireDefault(require(\"react-native-web/dist/exports/TouchableOpacity\"));\n\nvar _Dimensions = _interopRequireDefault(require(\"react-native-web/dist/exports/Dimensions\"));\n\nvar _Platform = _interopRequireDefault(require(\"react-native-web/dist/exports/Platform\"));\n\nvar _Image = _interopRequireDefault(require(\"react-native-web/dist/exports/Image\"));\n\nvar _Animated = _interopRequireDefault(require(\"react-native-web/dist/exports/Animated\"));\n\nvar _TextInput = _interopRequireDefault(require(\"react-native-web/dist/exports/TextInput\"));\n\nvar _FlatList = _interopRequireDefault(require(\"react-native-web/dist/exports/FlatList\"));\n\nvar _Keyboard = _interopRequireDefault(require(\"react-native-web/dist/exports/Keyboard\"));\n\nvar _reactNavigation = require(\"react-navigation\");\n\nvar _ReelView = _interopRequireDefault(require(\"../components/ReelView\"));\n\nvar _navigationRef = require(\"../navigationRef\");\n\nvar _config = require(\"../firebase/config.js\");\n\nvar _shuffleArray = _interopRequireDefault(require(\"shuffle-array\"));\n\nvar _reactNativeSnapCarousel = _interopRequireDefault(require(\"react-native-snap-carousel\"));\n\nvar _moment = _interopRequireDefault(require(\"moment\"));\n\nvar _expoFont = require(\"expo-font\");\n\nvar _FontAwesome = _interopRequireDefault(require(\"@expo/vector-icons/FontAwesome\"));\n\nvar _InputField = _interopRequireDefault(require(\"../components/InputField\"));\n\nvar _ReelFeedCard = _interopRequireDefault(require(\"../components/ReelFeedCard\"));\n\nvar _ProfileCard = _interopRequireDefault(require(\"../components/ProfileCard\"));\n\nvar _this = this,\n    _jsxFileName = \"/Users/rithikpothuganti/Telescope-app/Telescope/src/screens/SearchScreen.js\";\n\nvar SearchScreen = function SearchScreen(props) {\n  var _useState = (0, _react.useState)([]),\n      _useState2 = (0, _slicedToArray2.default)(_useState, 2),\n      reelList = _useState2[0],\n      setReelList = _useState2[1];\n\n  var _useState3 = (0, _react.useState)([]),\n      _useState4 = (0, _slicedToArray2.default)(_useState3, 2),\n      profileList = _useState4[0],\n      setProfileList = _useState4[1];\n\n  var _useState5 = (0, _react.useState)(true),\n      _useState6 = (0, _slicedToArray2.default)(_useState5, 2),\n      isLoading = _useState6[0],\n      setLoading = _useState6[1];\n\n  var _useState7 = (0, _react.useState)(\"\"),\n      _useState8 = (0, _slicedToArray2.default)(_useState7, 2),\n      searchTerm = _useState8[0],\n      setSearchTerm = _useState8[1];\n\n  return _react.default.createElement(_View.default, {\n    style: {\n      flex: 1,\n      zIndex: 0,\n      height: \"100%\",\n      backgroundColor: \"white\"\n    },\n    __self: _this,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 9\n    }\n  }, _react.default.createElement(_View.default, {\n    style: styles.tabBar,\n    __self: _this,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 13\n    }\n  }, _react.default.createElement(_TouchableOpacity.default, {\n    onPress: function onPress(event) {\n      (0, _navigationRef.navigate)(\"Today\");\n    },\n    __self: _this,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 17\n    }\n  }, _react.default.createElement(_Text.default, {\n    style: styles.tab,\n    __self: _this,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 17\n    }\n  }, \"Explore\")), _react.default.createElement(_TouchableOpacity.default, {\n    onPress: function onPress(event) {\n      (0, _navigationRef.navigate)(\"ThisWeek\");\n    },\n    __self: _this,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 17\n    }\n  }, _react.default.createElement(_Text.default, {\n    style: styles.tab,\n    __self: _this,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 17\n    }\n  }, \"Leaderboard\")), _react.default.createElement(_TouchableOpacity.default, {\n    style: {\n      marginTop: 5\n    },\n    onPress: function onPress(event) {\n      (0, _navigationRef.navigate)(\"Search\");\n    },\n    onSwiped: function onSwiped(cardIndex) {\n      setCurrent(cardIndex);\n    },\n    __self: _this,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 17\n    }\n  }, _react.default.createElement(_FontAwesome.default, {\n    name: \"search\",\n    size: 25,\n    color: \"#5c33ff\",\n    __self: _this,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 17\n    }\n  }))), _react.default.createElement(_View.default, {\n    style: {\n      flex: 1,\n      zIndex: 0,\n      height: \"100%\",\n      backgroundColor: \"white\"\n    },\n    __self: _this,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }\n  }, _react.default.createElement(_View.default, {\n    style: styles.container,\n    __self: _this,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 13\n    }\n  }, _react.default.createElement(_View.default, {\n    style: styles.inputContainer,\n    __self: _this,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 17\n    }\n  }, _react.default.createElement(_TextInput.default, {\n    style: styles.input,\n    placeholder: \"Search\",\n    value: searchTerm,\n    onChangeText: setSearchTerm,\n    autoCapitalize: \"none\",\n    autoCorrect: false,\n    returnKeyType: \"search\",\n    onSubmitEditing: function onSubmitEditing() {\n      _Keyboard.default.dismiss();\n\n      search(setReelList, setProfileList, setLoading, searchTerm);\n    },\n    onPress: function onPress() {\n      return _Keyboard.default.dismiss();\n    },\n    onSubmit: true,\n    __self: _this,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 21\n    }\n  }))), _react.default.createElement(_ScrollView.default, {\n    style: styles.scrollContainer,\n    showsVerticalScrollIndicator: false,\n    __self: _this,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 17\n    }\n  }, _react.default.createElement(_FlatList.default, {\n    data: profileList,\n    keyExtractor: function keyExtractor(data) {\n      return data.id;\n    },\n    renderItem: function renderItem(_ref) {\n      var item = _ref.item;\n      return renderProfileFeed(item);\n    },\n    __self: _this,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 25\n    }\n  }), _react.default.createElement(_FlatList.default, {\n    data: reelList,\n    keyExtractor: function keyExtractor(data) {\n      return data.id;\n    },\n    renderItem: function renderItem(_ref2) {\n      var item = _ref2.item;\n      return renderReelFeedView(item);\n    },\n    __self: _this,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 25\n    }\n  }))));\n};\n\nvar renderReelFeedView = function renderReelFeedView(data) {\n  return _react.default.createElement(_View.default, {\n    style: {\n      marginLeft: 20,\n      marginRight: 20\n    },\n    __self: _this,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 7\n    }\n  }, _react.default.createElement(_ReelFeedCard.default, {\n    title: data.title,\n    upvotes: data.upvotes,\n    image_url: data.thumbnail,\n    id: data.id,\n    data: data,\n    __self: _this,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 7\n    }\n  }));\n};\n\nvar renderProfileFeed = function renderProfileFeed(data) {\n  return _react.default.createElement(_View.default, {\n    style: {\n      margin: 20,\n      marginTop: 0\n    },\n    __self: _this,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 7\n    }\n  }, _react.default.createElement(_ProfileCard.default, {\n    uid: data.id,\n    name: data.fullName,\n    bio: data.bio,\n    imageURL: data.pic,\n    ProfileCard: true,\n    __self: _this,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 7\n    }\n  }));\n};\n\nvar getReels = function getReels(setReelList, setLoading, searchTerm) {\n  var reelsRef, reelList_;\n  return _regenerator.default.async(function getReels$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          reelsRef = _config.firebase.firestore().collection(\"reels\");\n          reelList_ = [];\n          console.log(\"getting reels\");\n          _context.next = 5;\n          return _regenerator.default.awrap(reelsRef.where(\"tags\", \"array-contains\", searchTerm).get().then(function (querySnapshot) {\n            querySnapshot.forEach(function (doc) {\n              var data_ = doc.data();\n              data_[\"id\"] = doc.id;\n              reelList_.push(data_);\n              console.log(data_.id);\n            });\n            setReelList(reelList_);\n            setLoading(false);\n          }).catch(function (error) {\n            console.log(error.message);\n          }));\n\n        case 5:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, null, Promise);\n};\n\nvar getProfiles = function getProfiles(setProfileList, setLoading, searchTerm) {\n  var usersRef, userList;\n  return _regenerator.default.async(function getProfiles$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          usersRef = _config.firebase.firestore().collection(\"users\");\n          userList = [];\n          console.log(\"getting profiles \" + searchTerm);\n          _context2.next = 5;\n          return _regenerator.default.awrap(usersRef.where(\"fullName\", \"==\", searchTerm).get().then(function (querySnapshot) {\n            querySnapshot.forEach(function (doc) {\n              var data_ = doc.data();\n              data_[\"id\"] = doc.id;\n              userList.push(data_);\n              console.log(doc.id);\n            });\n            setProfileList(userList);\n            setLoading(false);\n          }).catch(function (error) {\n            console.log(error.message);\n          }));\n\n        case 5:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, null, null, null, Promise);\n};\n\nvar search = function search(setReelList, setProfileList, setLoading, searchTerm) {\n  return _regenerator.default.async(function search$(_context3) {\n    while (1) {\n      switch (_context3.prev = _context3.next) {\n        case 0:\n          if (!(searchTerm.length <= 1)) {\n            _context3.next = 2;\n            break;\n          }\n\n          return _context3.abrupt(\"return\");\n\n        case 2:\n          if (!(searchTerm[0] == \"@\")) {\n            _context3.next = 6;\n            break;\n          }\n\n          setReelList([]);\n          getProfiles(setProfileList, setLoading, searchTerm.slice(1));\n          return _context3.abrupt(\"return\");\n\n        case 6:\n          if (!(searchTerm[0] == \"#\")) {\n            _context3.next = 10;\n            break;\n          }\n\n          setProfileList([]);\n          getReels(setReelList, setLoading, searchTerm.slice(1));\n          return _context3.abrupt(\"return\");\n\n        case 10:\n          getProfiles(setProfileList, setLoading, searchTerm);\n          getReels(setReelList, setLoading, searchTerm);\n\n        case 12:\n        case \"end\":\n          return _context3.stop();\n      }\n    }\n  }, null, null, null, Promise);\n};\n\nSearchScreen.navigationOptions = function () {\n  return {\n    header: function header() {\n      return false;\n    }\n  };\n};\n\nvar styles = _StyleSheet.default.create({\n  tabBar: {\n    paddingHorizontal: 16,\n    flexDirection: \"row\",\n    paddingTop: 60,\n    justifyContent: \"space-around\",\n    opacity: 50,\n    backgroundColor: \"white\",\n    paddingBottom: 8\n  },\n  tab: {\n    fontFamily: \"Raleway-Bold\",\n    fontWeight: \"400\",\n    fontSize: 25,\n    color: \"#ccc0ff\"\n  },\n  tabActive: {\n    fontFamily: \"Raleway-Bold\",\n    fontWeight: \"400\",\n    fontSize: 25,\n    color: \"#5c33ff\"\n  },\n  header: {\n    fontSize: 30,\n    fontFamily: \"RalewayExtraBold\",\n    marginBottom: 16\n  },\n  input: {\n    fontSize: 15,\n    fontFamily: \"Raleway-Regular\",\n    padding: 5,\n    paddingLeft: 10\n  },\n  inputContainer: {\n    backgroundColor: \"rgba(255, 215, 112, 0.7)\",\n    width: \"80%\",\n    borderRadius: 6,\n    marginTop: 16,\n    marginBottom: 16\n  },\n  container: {\n    alignItems: \"center\",\n    backgroundColor: \"white\"\n  },\n  scrollContainer: {\n    backgroundColor: \"white\",\n    height: \"100%\"\n  }\n});\n\nvar _default = SearchScreen;\nexports.default = _default;","map":{"version":3,"sources":["/Users/rithikpothuganti/Telescope-app/Telescope/src/screens/SearchScreen.js"],"names":["SearchScreen","props","reelList","setReelList","profileList","setProfileList","isLoading","setLoading","searchTerm","setSearchTerm","flex","zIndex","height","backgroundColor","styles","tabBar","event","tab","marginTop","cardIndex","setCurrent","container","inputContainer","input","Keyboard","dismiss","search","scrollContainer","data","id","item","renderProfileFeed","renderReelFeedView","marginLeft","marginRight","title","upvotes","thumbnail","margin","fullName","bio","pic","getReels","reelsRef","firebase","firestore","collection","reelList_","console","log","where","get","then","querySnapshot","forEach","doc","data_","push","catch","error","message","getProfiles","usersRef","userList","length","slice","navigationOptions","header","StyleSheet","create","paddingHorizontal","flexDirection","paddingTop","justifyContent","opacity","paddingBottom","fontFamily","fontWeight","fontSize","color","tabActive","marginBottom","padding","paddingLeft","width","borderRadius","alignItems"],"mappings":"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","sourcesContent":["import React, { useContext, useState, useEffect, useRef } from \"react\";\nimport {\n  View,\n  ScrollView,\n  StyleSheet,\n  Text,\n  TouchableOpacity,\n  Dimensions,\n  Platform,\n  Image,\n  Animated,\n  TextInput,\n  FlatList,\n  Keyboard\n} from \"react-native\";\nimport { NavigationEvents } from \"react-navigation\";\nimport ReelView from \"../components/ReelView\";\nimport { navigate } from \"../navigationRef\";\nimport { firebase } from \"../firebase/config.js\";\nimport shuffle from \"shuffle-array\";\nimport Carousel from \"react-native-snap-carousel\";\nimport moment from \"moment\";\nimport { useFonts } from \"expo-font\";\nimport Icon from \"react-native-vector-icons/FontAwesome\";\nimport InputField from \"../components/InputField\";\nimport ReelFeedCard from \"../components/ReelFeedCard\"\nimport ProfileCard from \"../components/ProfileCard\"\n\n\nconst SearchScreen = (props) => {\n\n    const [reelList, setReelList] = useState([]);\n    const [profileList, setProfileList] = useState([]);\n    const [isLoading, setLoading] = useState(true);\n    const [searchTerm, setSearchTerm] = useState(\"\");\n\n    return (\n        <View\n        style={{\n          flex: 1,\n          // flexDirection: \"column\",\n          zIndex: 0,\n          height: \"100%\",\n          backgroundColor: \"white\",\n          // flexDirection: \"column\",\n          // alignItems: \"center\",\n        }}\n        >\n            <View style={styles.tabBar}>\n                <TouchableOpacity \n                    onPress={(event) => {\n                        navigate(\"Today\");\n                    }}>\n                <Text style={styles.tab}>Explore</Text>\n                </TouchableOpacity>\n                <TouchableOpacity\n                onPress={(event) => {\n                    navigate(\"ThisWeek\");\n                }}\n                >\n                <Text style={styles.tab}>Leaderboard</Text>\n                </TouchableOpacity>\n                <TouchableOpacity\n                style={{marginTop: 5}}\n                onPress={(event) => {\n                    navigate(\"Search\");\n                }}\n                onSwiped={(cardIndex) => {\n                    setCurrent(cardIndex);\n                }}\n                >\n                <Icon\n                    name={\"search\"}\n                    size={25}\n                    color={ \"#5c33ff\"}\n                />\n                </TouchableOpacity>\n            </View>\n            <View\n        style={{\n          flex: 1,\n          // flexDirection: \"column\",\n          zIndex: 0,\n          height: \"100%\",\n          backgroundColor: \"white\",\n          // flexDirection: \"column\",\n          // alignItems: \"center\",\n        }}\n        >\n            <View\n                style={styles.container}\n            >\n                <View style={styles.inputContainer}>\n                    <TextInput\n                    style={styles.input}\n                    placeholder=\"Search\"\n                    value={searchTerm}\n                    onChangeText={setSearchTerm}\n                    autoCapitalize=\"none\"\n                    autoCorrect={false}\n                    returnKeyType=\"search\"\n                    onSubmitEditing={() => {\n                        Keyboard.dismiss();\n                        search(setReelList, setProfileList, setLoading, searchTerm);\n                        // getReels(setReelList, setLoading, searchTerm);\n                    }}\n                    onPress={() => Keyboard.dismiss()}\n                    onSubmit\n                    />\n                </View>\n                </View>\n                <ScrollView\n                style={styles.scrollContainer}\n                showsVerticalScrollIndicator={false}\n                >\n                    {/* <ScrollView\n                        style={{ height: \"100%\", width: \"90%\" }}\n                        showsVerticalScrollIndicator={false}\n                    > */}\n                        <FlatList\n                            data={profileList}\n                            keyExtractor={(data) => data.id}\n                            renderItem={({ item }) => {\n                                return renderProfileFeed(item);\n                            }}\n                        />\n                        <FlatList\n                            data={reelList}\n                            keyExtractor={(data) => data.id}\n                            renderItem={({ item }) => {\n                                return renderReelFeedView(item);\n                            }}\n                        />\n                {/* </ScrollView> */}\n            </ScrollView>\n            </View>\n        </View>\n    );\n};\n\nconst renderReelFeedView = (data) => {\n    return (\n      <View\n      style={{marginLeft: 20, marginRight: 20}}\n      >\n      <ReelFeedCard\n        title={data.title}\n        upvotes={data.upvotes}\n        image_url={data.thumbnail}\n        id={data.id}\n        data={data}\n      />\n      </View>\n    );\n  };\n\nconst renderProfileFeed = (data) => {\n    return (\n      <View\n      style={{margin: 20, marginTop: 0}}\n      >\n      <ProfileCard\n        uid={data.id}\n        name={data.fullName}\n        bio={data.bio}\n        imageURL={data.pic}\n      ProfileCard/>\n      </View>\n    );\n  };\n\nconst getReels = async (setReelList, setLoading, searchTerm) => {\n    let reelsRef = firebase.firestore().collection(\"reels\");\n    let reelList_ = [];\n    console.log(\"getting reels\");\n    await reelsRef\n    //   .orderBy(\"num_upvotes\", \"desc\")\n      .where(\"tags\", \"array-contains\", searchTerm)\n    //   .orderBy(\"timestamp\", \"desc\")\n      .get()\n      .then((querySnapshot) => {\n        querySnapshot.forEach((doc) => {\n          let data_ = doc.data();\n          data_[\"id\"] = doc.id;\n          reelList_.push(data_);\n            console.log(data_.id);\n        });\n        setReelList(reelList_);\n          setLoading(false);\n      })\n      .catch((error) => {\n        console.log(error.message);\n      });\n  };\n\n\nconst getProfiles = async (setProfileList, setLoading, searchTerm) => {\n    let usersRef = firebase.firestore().collection(\"users\");\n    let userList = [];\n    console.log(\"getting profiles \" + searchTerm);\n    await usersRef\n      .where(\"fullName\", \"==\", searchTerm)\n      .get()\n      .then((querySnapshot) => {\n        querySnapshot.forEach((doc) => {\n          let data_ = doc.data();\n          data_[\"id\"] = doc.id;\n          userList.push(data_);\n            console.log(doc.id);\n        });\n        setProfileList(userList);\n          setLoading(false);\n      })\n      .catch((error) => {\n        console.log(error.message);\n      });\n  };\n\nconst search = async (setReelList, setProfileList, setLoading, searchTerm) => {\n  if(searchTerm.length <= 1) {\n    return;\n  }\n  if(searchTerm[0] == \"@\") {\n    setReelList([]);\n    getProfiles(setProfileList, setLoading, searchTerm.slice(1));\n    return;\n  }\n  if(searchTerm[0] == \"#\") {\n    setProfileList([]);\n    getReels(setReelList, setLoading, searchTerm.slice(1));\n    return;\n  }\n  getProfiles(setProfileList, setLoading, searchTerm);\n  getReels(setReelList, setLoading, searchTerm);\n}\n\nSearchScreen.navigationOptions = () => {\n    return {\n      header: () => false,\n    };\n  };\n\nconst styles = StyleSheet.create({\n    tabBar: {\n      paddingHorizontal: 16,\n      flexDirection: \"row\",\n      paddingTop: 60,\n      justifyContent: \"space-around\",\n      opacity: 50,\n      backgroundColor: \"white\",\n      paddingBottom: 8,\n    },\n    tab: {\n      fontFamily: \"Raleway-Bold\",\n      fontWeight: \"400\",\n      fontSize: 25,\n      color: \"#ccc0ff\",\n    },\n    tabActive: {\n      fontFamily: \"Raleway-Bold\",\n      fontWeight: \"400\",\n      fontSize: 25,\n      color: \"#5c33ff\",\n    },\n    header: {\n      fontSize: 30,\n      fontFamily: \"RalewayExtraBold\",\n      marginBottom: 16,\n    },\n    input: {\n        fontSize: 15,\n        fontFamily: \"Raleway-Regular\",\n        padding: 5,\n        paddingLeft: 10\n    },\n    inputContainer: {\n        backgroundColor: \"rgba(255, 215, 112, 0.7)\",\n        width: \"80%\",\n        borderRadius: 6,\n        marginTop: 16,\n        marginBottom: 16\n    },\n    container: {\n        alignItems: \"center\",\n        backgroundColor: \"white\",\n        // height:\"100%\"\n    },\n    scrollContainer: {\n        // alignItems: \"center\",\n        backgroundColor: \"white\",\n        height: \"100%\",\n        // width: \"90%\"\n    }\n      \n  });  \n\nexport default SearchScreen;\n\n\n\n\n"]},"metadata":{},"sourceType":"script"}