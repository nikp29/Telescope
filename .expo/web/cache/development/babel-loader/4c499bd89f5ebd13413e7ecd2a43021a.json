{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _moment = _interopRequireDefault(require(\"moment\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _StyleSheet = _interopRequireDefault(require(\"react-native-web/dist/exports/StyleSheet\"));\n\nvar _View = _interopRequireDefault(require(\"react-native-web/dist/exports/View\"));\n\nvar _Text = _interopRequireDefault(require(\"react-native-web/dist/exports/Text\"));\n\nvar _TouchableOpacity = _interopRequireDefault(require(\"react-native-web/dist/exports/TouchableOpacity\"));\n\nvar _FlatList = _interopRequireDefault(require(\"react-native-web/dist/exports/FlatList\"));\n\nvar _ScrollView = _interopRequireDefault(require(\"react-native-web/dist/exports/ScrollView\"));\n\nvar _TextInput = _interopRequireDefault(require(\"react-native-web/dist/exports/TextInput\"));\n\nvar _Keyboard = _interopRequireDefault(require(\"react-native-web/dist/exports/Keyboard\"));\n\nvar _reactNativeElements = require(\"react-native-elements\");\n\nvar _reactNativeModalize = require(\"react-native-modalize\");\n\nvar _reactNativePortalize = require(\"react-native-portalize\");\n\nvar _reactNativeYoutubeIframe = _interopRequireDefault(require(\"react-native-youtube-iframe\"));\n\nvar _asyncStorage = _interopRequireDefault(require(\"@react-native-community/async-storage\"));\n\nvar _config = require(\"../firebase/config.js\");\n\nvar _CommentCard = _interopRequireDefault(require(\"../components/CommentCard\"));\n\nvar _ProfileIcon = _interopRequireDefault(require(\"../components/ProfileIcon\"));\n\nvar _FontAwesome = _interopRequireDefault(require(\"@expo/vector-icons/FontAwesome\"));\n\nvar _reactNavigation = require(\"react-navigation\");\n\nvar _this = this,\n    _jsxFileName = \"/Users/rithikpothuganti/Telescope-app/Telescope/src/components/ReelView.js\";\n\nvar ReelView = function ReelView(_ref) {\n  var url = _ref.url,\n      tags = _ref.tags,\n      description = _ref.description,\n      reel_uid = _ref.reel_uid,\n      showComments = _ref.showComments,\n      id = _ref.id,\n      autoplay = _ref.autoplay,\n      height = _ref.height;\n\n  var _useState = (0, _react.useState)(true),\n      _useState2 = (0, _slicedToArray2.default)(_useState, 2),\n      on = _useState2[0],\n      setOn = _useState2[1];\n\n  var _useState3 = (0, _react.useState)(false),\n      _useState4 = (0, _slicedToArray2.default)(_useState3, 2),\n      status = _useState4[0],\n      setStatus = _useState4[1];\n\n  var _useState5 = (0, _react.useState)(false),\n      _useState6 = (0, _slicedToArray2.default)(_useState5, 2),\n      commenting = _useState6[0],\n      setCommenting = _useState6[1];\n\n  var _useState7 = (0, _react.useState)(false),\n      _useState8 = (0, _slicedToArray2.default)(_useState7, 2),\n      ready = _useState8[0],\n      setReady = _useState8[1];\n\n  var _useState9 = (0, _react.useState)(\"\"),\n      _useState10 = (0, _slicedToArray2.default)(_useState9, 2),\n      comment = _useState10[0],\n      setComment = _useState10[1];\n\n  var _useState11 = (0, _react.useState)(\"\"),\n      _useState12 = (0, _slicedToArray2.default)(_useState11, 2),\n      uid = _useState12[0],\n      setUid = _useState12[1];\n\n  var _useState13 = (0, _react.useState)([]),\n      _useState14 = (0, _slicedToArray2.default)(_useState13, 2),\n      comments = _useState14[0],\n      setComments = _useState14[1];\n\n  var _useState15 = (0, _react.useState)(false),\n      _useState16 = (0, _slicedToArray2.default)(_useState15, 2),\n      initialGet = _useState16[0],\n      setInitialGet = _useState16[1];\n\n  var _useState17 = (0, _react.useState)(false),\n      _useState18 = (0, _slicedToArray2.default)(_useState17, 2),\n      upvoted = _useState18[0],\n      setUpvoted = _useState18[1];\n\n  var _useState19 = (0, _react.useState)([]),\n      _useState20 = (0, _slicedToArray2.default)(_useState19, 2),\n      upvotes = _useState20[0],\n      setUpvotes = _useState20[1];\n\n  var _useState21 = (0, _react.useState)(\"\"),\n      _useState22 = (0, _slicedToArray2.default)(_useState21, 2),\n      author = _useState22[0],\n      setAuthor = _useState22[1];\n\n  (0, _react.useEffect)(function () {\n    function fetchUid() {\n      var uid_, reelsRef;\n      return _regenerator.default.async(function fetchUid$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _regenerator.default.awrap(_asyncStorage.default.getItem(\"token\"));\n\n            case 2:\n              uid_ = _context.sent;\n\n              if (showComments) {\n                reelsRef = _config.firebase.firestore().collection(\"reels\");\n                reelsRef.doc(id).get().then(function (doc) {\n                  var data = doc.data();\n                  setUpvoted(data.upvotes.includes(uid_));\n                  setUpvotes(data.upvotes);\n                }).catch(function (error) {\n                  return console.log(error.message);\n                });\n              }\n\n              setUid(uid_);\n\n              _config.firebase.firestore().collection(\"users\").doc(reel_uid).get().then(function (doc) {\n                var data = doc.data();\n                setAuthor(data.fullName);\n              }).catch(function (error) {\n                return console.log(error.message);\n              });\n\n            case 6:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    }\n\n    fetchUid();\n    return function () {\n      null;\n    };\n  }, []);\n  var modalizeRef = (0, _react.useRef)(null);\n\n  if (initialGet == false && showComments) {\n    setInitialGet(true);\n    getComments(id, setComments);\n  }\n\n  var onOpen = function onOpen() {\n    var _modalizeRef$current;\n\n    (_modalizeRef$current = modalizeRef.current) == null ? void 0 : _modalizeRef$current.open();\n  };\n\n  var colors = [\"rgba(196, 196, 196, 0.7)\", \"rgba(255, 215, 112, 0.7)\", \"rgba(92, 51, 255, 0.6)\"];\n  var itemHeight = height ? height : \"100%\";\n  var topPadding = height ? 0 : 90;\n  var padding = height ? 0 : 16;\n  var borderRad = height ? 0 : 8;\n  return _react.default.createElement(_View.default, {\n    style: {\n      height: itemHeight,\n      backgroundColor: \"white\",\n      flexDirection: \"column\",\n      justifyContent: \"flex-start\",\n      padding: padding,\n      paddingTop: topPadding\n    },\n    __self: _this,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 5\n    }\n  }, _react.default.createElement(_reactNavigation.NavigationEvents, {\n    onWillBlur: function onWillBlur(event) {\n      setOn(false);\n    },\n    onDidFocus: function onDidFocus(event) {\n      setOn(true);\n    },\n    __self: _this,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 7\n    }\n  }), _react.default.createElement(_View.default, {\n    style: {\n      borderRadius: borderRad,\n      overflow: \"hidden\",\n      height: \"100%\",\n      backgroundColor: \"black\",\n      flexDirection: \"column\",\n      justifyContent: \"center\"\n    },\n    __self: _this,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 7\n    }\n  }, _react.default.createElement(_reactNativeYoutubeIframe.default, {\n    videoId: url,\n    play: autoplay && on,\n    onReady: function onReady() {\n      return setReady(autoplay);\n    },\n    onChangeState: function onChangeState(e) {\n      return setStatus(e);\n    },\n    height: 201,\n    forceAndroidAutoplay: true,\n    __self: _this,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 9\n    }\n  }), _react.default.createElement(_View.default, {\n    style: styles.bottomContainer,\n    __self: _this,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 9\n    }\n  }, _react.default.createElement(_View.default, {\n    style: styles.commentRow,\n    __self: _this,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 11\n    }\n  }, showComments && _react.default.createElement(_TouchableOpacity.default, {\n    style: styles.upvoteBox,\n    onPress: function onPress() {\n      return editVote(upvotes, id, setUpvoted);\n    },\n    __self: _this,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 15\n    }\n  }, _react.default.createElement(_FontAwesome.default, {\n    name: upvoted ? \"heart\" : \"heart-o\",\n    size: 30,\n    color: upvoted ? \"#FFD770\" : \"#999999\",\n    __self: _this,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 17\n    }\n  }), _react.default.createElement(_Text.default, {\n    style: styles.upvoteText,\n    __self: _this,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 17\n    }\n  }, upvotes.length))), _react.default.createElement(_View.default, {\n    style: styles.topRow,\n    __self: _this,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 11\n    }\n  }, showComments && _react.default.createElement(_TouchableOpacity.default, {\n    onPress: onOpen,\n    __self: _this,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 15\n    }\n  }, _react.default.createElement(_FontAwesome.default, {\n    name: \"commenting\",\n    size: 30,\n    color: \"rgba(196, 196, 196, 0.7)\",\n    __self: _this,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 17\n    }\n  })), tags != [] && _react.default.createElement(_ScrollView.default, {\n    horizontal: true,\n    showsHorizontalScrollIndicator: false,\n    style: styles.tagView,\n    __self: _this,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 15\n    }\n  }, _react.default.createElement(_FlatList.default, {\n    scrollEnabled: true,\n    horizontal: true,\n    style: styles.tags,\n    data: tags,\n    showsHorizontalScrollIndicator: false,\n    renderItem: function renderItem(_ref2) {\n      var item = _ref2.item;\n      var color = colors[tags.indexOf(item) % 3];\n      return _react.default.createElement(_View.default, {\n        style: {\n          padding: 8,\n          backgroundColor: color,\n          borderRadius: 8,\n          marginRight: 16\n        },\n        __self: _this,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 23\n        }\n      }, _react.default.createElement(_Text.default, {\n        __self: _this,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 25\n        }\n      }, item));\n    },\n    __self: _this,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 17\n    }\n  }))), _react.default.createElement(_View.default, {\n    style: styles.bottomRow,\n    __self: _this,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 11\n    }\n  }, _react.default.createElement(_ProfileIcon.default, {\n    uid: reel_uid,\n    __self: _this,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 13\n    }\n  }), showComments && _react.default.createElement(_TouchableOpacity.default, {\n    style: styles.commentInputContainer,\n    onPress: function onPress() {\n      onOpen();\n      setCommenting(true);\n    },\n    __self: _this,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 15\n    }\n  }, _react.default.createElement(_Text.default, {\n    style: styles.commentInput,\n    placeholder: \"Add a comment\",\n    value: comment,\n    onChangeText: setComment,\n    autoCapitalize: \"none\",\n    autoCorrect: false,\n    returnKeyType: \"send\",\n    editable: false,\n    __self: _this,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 17\n    }\n  }, \"Add a comment\"))))), showComments && _react.default.createElement(_react.default.Fragment, null, _react.default.createElement(_reactNativePortalize.Portal, {\n    __self: _this,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 11\n    }\n  }, _react.default.createElement(_reactNativeModalize.Modalize, {\n    modalStyle: {\n      backgroundColor: \"#E5E5E5\"\n    },\n    ref: modalizeRef,\n    modalTopOffset: 100,\n    onClose: function onClose() {\n      setCommenting(false);\n    },\n    HeaderComponent: _react.default.createElement(_react.default.Fragment, null, description != \"\" && _react.default.createElement(_Text.default, {\n      style: styles.adviceText,\n      __self: _this,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 21\n      }\n    }, author + \" would like advice on these areas: \" + description)),\n    FooterComponent: _react.default.createElement(_View.default, {\n      style: styles.footer,\n      __self: _this,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 17\n      }\n    }, _react.default.createElement(_TextInput.default, {\n      style: styles.commentInput,\n      placeholder: \"Add a comment\",\n      value: comment,\n      onChangeText: setComment,\n      autoCapitalize: \"none\",\n      autoCorrect: false,\n      returnKeyType: \"send\",\n      autoFocus: commenting,\n      onEndEditing: function onEndEditing() {\n        setCommenting(false);\n      },\n      onSubmitEditing: function onSubmitEditing() {\n        _Keyboard.default.dismiss();\n\n        setCommenting(false);\n      },\n      __self: _this,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 19\n      }\n    }), _react.default.createElement(_TouchableOpacity.default, {\n      onPress: function onPress() {\n        if (comment != \"\") {\n          _Keyboard.default.dismiss();\n\n          setCommenting(false);\n          addComment(id, comment, setComment);\n          getComments(id, setComments);\n        }\n      },\n      __self: _this,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 19\n      }\n    }, _react.default.createElement(_FontAwesome.default, {\n      name: \"paper-plane\",\n      size: 24,\n      color: \"rgba(0, 0, 0, .7)\",\n      __self: _this,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 21\n      }\n    }))),\n    __self: _this,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 13\n    }\n  }, _react.default.createElement(_View.default, {\n    style: styles.commentModal,\n    __self: _this,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 276,\n      columnNumber: 15\n    }\n  }, _react.default.createElement(_FlatList.default, {\n    showsVerticalScrollIndicator: false,\n    data: comments,\n    keyExtractor: function keyExtractor(data) {\n      return data.id;\n    },\n    renderItem: function renderItem(_ref3) {\n      var item = _ref3.item;\n      return _react.default.createElement(_CommentCard.default, {\n        data: item,\n        uid: uid,\n        __self: _this,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 284,\n          columnNumber: 28\n        }\n      });\n    },\n    __self: _this,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 277,\n      columnNumber: 17\n    }\n  }))))));\n};\n\nvar addComment = function addComment(reel_id, description, setComment) {\n  var uid;\n  return _regenerator.default.async(function addComment$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          if (!(description == \"\")) {\n            _context2.next = 2;\n            break;\n          }\n\n          return _context2.abrupt(\"return\");\n\n        case 2:\n          _context2.next = 4;\n          return _regenerator.default.awrap(_asyncStorage.default.getItem(\"token\"));\n\n        case 4:\n          uid = _context2.sent;\n\n          _config.firebase.firestore().collection(\"reels/\" + reel_id + \"/comments\").add({\n            user: uid,\n            description: description,\n            timestamp: (0, _moment.default)().unix().valueOf(),\n            upvotes: [],\n            num_upvotes: 0,\n            reel_id: reel_id\n          }).then(function (docRef) {\n            setComment(\"\");\n          }).catch(function (error) {\n            console.error(\"Error adding document: \", error);\n          });\n\n          return _context2.abrupt(\"return\");\n\n        case 7:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, null, null, null, Promise);\n};\n\nvar editVote = function editVote(upvotes, id, setUpvoted) {\n  var uid, reelsRef, new_upvotes;\n  return _regenerator.default.async(function editVote$(_context3) {\n    while (1) {\n      switch (_context3.prev = _context3.next) {\n        case 0:\n          _context3.next = 2;\n          return _regenerator.default.awrap(_asyncStorage.default.getItem(\"token\"));\n\n        case 2:\n          uid = _context3.sent;\n          reelsRef = _config.firebase.firestore().collection(\"reels\");\n          new_upvotes = upvotes;\n\n          if (!upvotes.includes(uid)) {\n            _context3.next = 12;\n            break;\n          }\n\n          new_upvotes.splice(new_upvotes.indexOf(uid), 1);\n          _context3.next = 9;\n          return _regenerator.default.awrap(reelsRef.doc(id).update({\n            upvotes: new_upvotes,\n            num_upvotes: new_upvotes.length\n          }));\n\n        case 9:\n          setUpvoted(false);\n          _context3.next = 16;\n          break;\n\n        case 12:\n          new_upvotes.push(uid);\n          _context3.next = 15;\n          return _regenerator.default.awrap(reelsRef.doc(id).update({\n            upvotes: new_upvotes,\n            num_upvotes: new_upvotes.length\n          }));\n\n        case 15:\n          setUpvoted(true);\n\n        case 16:\n        case \"end\":\n          return _context3.stop();\n      }\n    }\n  }, null, null, null, Promise);\n};\n\nvar getComments = function getComments(id, setComments) {\n  var comments;\n  return _regenerator.default.async(function getComments$(_context4) {\n    while (1) {\n      switch (_context4.prev = _context4.next) {\n        case 0:\n          comments = [];\n          _context4.next = 3;\n          return _regenerator.default.awrap(_config.firebase.firestore().collection(\"reels/\" + id + \"/comments\").orderBy(\"num_upvotes\", \"desc\").orderBy(\"timestamp\", \"desc\").get().then(function (querySnapshot) {\n            comments = querySnapshot.docs.map(function (doc) {\n              var data_ = doc.data();\n              data_[\"id\"] = doc.id;\n              return data_;\n            });\n          }));\n\n        case 3:\n          setComments(comments);\n\n        case 4:\n        case \"end\":\n          return _context4.stop();\n      }\n    }\n  }, null, null, null, Promise);\n};\n\nvar styles = _StyleSheet.default.create({\n  username: {\n    fontFamily: \"Raleway-ExtraBold\",\n    fontSize: 26,\n    marginTop: 8\n  },\n  description: {\n    fontFamily: \"Raleway-Regular\",\n    fontSize: 14,\n    marginTop: 8\n  },\n  tags: {\n    flexDirection: \"column\",\n    width: \"100%\",\n    marginTop: 8\n  },\n  bottomContainer: {\n    position: \"absolute\",\n    bottom: 0,\n    left: 0,\n    right: 0\n  },\n  commentRow: {\n    flexDirection: \"row-reverse\",\n    paddingLeft: 8,\n    alignItems: \"center\"\n  },\n  topRow: {\n    flexDirection: \"row-reverse\",\n    paddingLeft: 8,\n    paddingRight: 8,\n    alignItems: \"center\"\n  },\n  tagView: {\n    flex: 1,\n    marginRight: 8\n  },\n  bottomRow: {\n    flexDirection: \"row-reverse\",\n    padding: 8,\n    alignItems: \"center\"\n  },\n  commentInput: {\n    flex: 1,\n    fontFamily: \"Raleway-Regular\",\n    color: \"rgba(0, 0, 0, 0.9)\",\n    fontSize: 14\n  },\n  commentInputContainer: {\n    flex: 1,\n    backgroundColor: \"rgba(196, 196, 196, 0.7)\",\n    borderRadius: 8,\n    padding: 8,\n    marginRight: 8\n  },\n  footer: {\n    flexDirection: \"row\",\n    backgroundColor: \"white\",\n    padding: 16,\n    paddingBottom: 24,\n    alignItems: \"center\"\n  },\n  commentModal: {\n    flexDirection: \"column\"\n  },\n  upvoteBox: {\n    flexDirection: \"column\",\n    alignItems: \"center\",\n    padding: 8,\n    marginRight: -8\n  },\n  upvoteText: {\n    fontFamily: \"Raleway-Regular\",\n    fontSize: 13,\n    color: \"#86878B\"\n  },\n  adviceText: {\n    marginTop: 16,\n    padding: 16,\n    fontFamily: \"Raleway-Regular\",\n    fontSize: 15,\n    color: \"black\"\n  }\n});\n\nvar _default = ReelView;\nexports.default = _default;","map":{"version":3,"sources":["/Users/rithikpothuganti/Telescope-app/Telescope/src/components/ReelView.js"],"names":["ReelView","url","tags","description","reel_uid","showComments","id","autoplay","height","on","setOn","status","setStatus","commenting","setCommenting","ready","setReady","comment","setComment","uid","setUid","comments","setComments","initialGet","setInitialGet","upvoted","setUpvoted","upvotes","setUpvotes","author","setAuthor","fetchUid","AsyncStorage","getItem","uid_","reelsRef","firebase","firestore","collection","doc","get","then","data","includes","catch","error","console","log","message","fullName","modalizeRef","getComments","onOpen","current","open","colors","itemHeight","topPadding","padding","borderRad","backgroundColor","flexDirection","justifyContent","paddingTop","event","borderRadius","overflow","e","styles","bottomContainer","commentRow","upvoteBox","editVote","upvoteText","length","topRow","tagView","item","color","indexOf","marginRight","bottomRow","commentInputContainer","commentInput","adviceText","footer","Keyboard","dismiss","addComment","commentModal","reel_id","add","user","timestamp","unix","valueOf","num_upvotes","docRef","new_upvotes","splice","update","push","orderBy","querySnapshot","docs","map","data_","StyleSheet","create","username","fontFamily","fontSize","marginTop","width","position","bottom","left","right","paddingLeft","alignItems","paddingRight","flex","paddingBottom"],"mappings":"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","sourcesContent":["import moment from \"moment\";\nimport React, { useState, useEffect, useRef } from \"react\";\nimport {\n  StyleSheet,\n  View,\n  Text,\n  TouchableOpacity,\n  FlatList,\n  ScrollView,\n  TextInput,\n  Keyboard,\n} from \"react-native\";\nimport { Input } from \"react-native-elements\";\nimport { Modalize } from \"react-native-modalize\";\nimport { Host, Portal } from \"react-native-portalize\";\nimport YoutubePlayer from \"react-native-youtube-iframe\";\nimport AsyncStorage from \"@react-native-community/async-storage\";\nimport { firebase } from \"../firebase/config.js\";\nimport CommentCard from \"../components/CommentCard\";\nimport ProfileIcon from \"../components/ProfileIcon\";\nimport Icon from \"react-native-vector-icons/FontAwesome\";\nimport { NavigationEvents } from \"react-navigation\";\n\nconst ReelView = ({\n  url,\n  tags,\n  description,\n  reel_uid,\n  showComments,\n  id,\n  autoplay,\n  height,\n}) => {\n  const [on, setOn] = useState(true);\n  const [status, setStatus] = useState(false);\n  const [commenting, setCommenting] = useState(false);\n  const [ready, setReady] = useState(false);\n  const [comment, setComment] = useState(\"\");\n  const [uid, setUid] = useState(\"\");\n  const [comments, setComments] = useState([]);\n  const [initialGet, setInitialGet] = useState(false);\n  const [upvoted, setUpvoted] = useState(false);\n  const [upvotes, setUpvotes] = useState([]);\n  const [author, setAuthor] = useState(\"\");\n  useEffect(() => {\n    async function fetchUid() {\n      const uid_ = await AsyncStorage.getItem(\"token\");\n      if (showComments) {\n        const reelsRef = firebase.firestore().collection(\"reels\");\n        reelsRef\n          .doc(id)\n          .get()\n          .then((doc) => {\n            const data = doc.data();\n            setUpvoted(data.upvotes.includes(uid_));\n            setUpvotes(data.upvotes);\n          })\n          .catch((error) => console.log(error.message));\n      }\n      setUid(uid_);\n      firebase\n        .firestore()\n        .collection(\"users\")\n        .doc(reel_uid)\n        .get()\n        .then((doc) => {\n          const data = doc.data();\n          setAuthor(data.fullName);\n        })\n        .catch((error) => console.log(error.message));\n    }\n    fetchUid();\n    return () => {\n      null;\n    };\n  }, []);\n  const modalizeRef = useRef(null);\n  if (initialGet == false && showComments) {\n    setInitialGet(true);\n    getComments(id, setComments);\n  }\n  const onOpen = () => {\n    modalizeRef.current?.open();\n  };\n  const colors = [\n    \"rgba(196, 196, 196, 0.7)\",\n    \"rgba(255, 215, 112, 0.7)\",\n    \"rgba(92, 51, 255, 0.6)\",\n  ];\n  let itemHeight = height ? height : \"100%\";\n  let topPadding = height ? 0 : 90;\n  let padding = height ? 0 : 16;\n  let borderRad = height ? 0 : 8;\n  return (\n    <View\n      style={{\n        height: itemHeight,\n        backgroundColor: \"white\",\n        flexDirection: \"column\",\n        justifyContent: \"flex-start\",\n        padding: padding,\n        paddingTop: topPadding,\n      }}\n    >\n      <NavigationEvents\n        onWillBlur={(event) => {\n          setOn(false);\n        }}\n        onDidFocus={(event) => {\n          setOn(true);\n        }}\n      />\n      <View\n        style={{\n          borderRadius: borderRad,\n          overflow: \"hidden\",\n          height: \"100%\",\n          backgroundColor: \"black\",\n          flexDirection: \"column\",\n          justifyContent: \"center\",\n        }}\n      >\n        <YoutubePlayer\n          videoId={url}\n          play={autoplay && on} // control playback of video with true/false\n          onReady={() => setReady(autoplay)}\n          onChangeState={(e) => setStatus(e)}\n          height={201}\n          forceAndroidAutoplay\n        />\n\n        <View style={styles.bottomContainer}>\n          <View style={styles.commentRow}>\n            {showComments && (\n              <TouchableOpacity\n                style={styles.upvoteBox}\n                onPress={() => editVote(upvotes, id, setUpvoted)}\n              >\n                <Icon\n                  name={upvoted ? \"heart\" : \"heart-o\"}\n                  size={30}\n                  color={upvoted ? \"#FFD770\" : \"#999999\"}\n                />\n                <Text style={styles.upvoteText}>{upvotes.length}</Text>\n              </TouchableOpacity>\n            )}\n          </View>\n          <View style={styles.topRow}>\n            {showComments && (\n              <TouchableOpacity onPress={onOpen}>\n                <Icon\n                  name={\"commenting\"}\n                  size={30}\n                  color=\"rgba(196, 196, 196, 0.7)\"\n                />\n              </TouchableOpacity>\n            )}\n            {tags != [] && (\n              <ScrollView\n                horizontal\n                showsHorizontalScrollIndicator={false}\n                style={styles.tagView}\n              >\n                <FlatList\n                  scrollEnabled={true}\n                  horizontal\n                  style={styles.tags}\n                  data={tags}\n                  showsHorizontalScrollIndicator={false}\n                  renderItem={({ item }) => {\n                    const color = colors[tags.indexOf(item) % 3];\n                    return (\n                      <View\n                        style={{\n                          padding: 8,\n                          backgroundColor: color,\n                          borderRadius: 8,\n                          marginRight: 16,\n                        }}\n                      >\n                        <Text>{item}</Text>\n                      </View>\n                    );\n                  }}\n                />\n              </ScrollView>\n            )}\n          </View>\n          <View style={styles.bottomRow}>\n            <ProfileIcon uid={reel_uid} />\n            {showComments && (\n              <TouchableOpacity\n                style={styles.commentInputContainer}\n                onPress={() => {\n                  onOpen();\n                  setCommenting(true);\n                }}\n              >\n                <Text\n                  style={styles.commentInput}\n                  placeholder={\"Add a comment\"}\n                  value={comment}\n                  onChangeText={setComment}\n                  autoCapitalize=\"none\"\n                  autoCorrect={false}\n                  returnKeyType=\"send\"\n                  editable={false}\n                >\n                  Add a comment\n                </Text>\n              </TouchableOpacity>\n            )}\n          </View>\n        </View>\n      </View>\n\n      {showComments && (\n        <>\n          <Portal>\n            <Modalize\n              modalStyle={{ backgroundColor: \"#E5E5E5\" }}\n              ref={modalizeRef}\n              modalTopOffset={100}\n              onClose={() => {\n                setCommenting(false);\n              }}\n              HeaderComponent={\n                <>\n                  {description != \"\" && (\n                    <Text style={styles.adviceText}>\n                      {author +\n                        \" would like advice on these areas: \" +\n                        description}\n                    </Text>\n                  )}\n                </>\n              }\n              FooterComponent={\n                <View style={styles.footer}>\n                  <TextInput\n                    style={styles.commentInput}\n                    placeholder={\"Add a comment\"}\n                    value={comment}\n                    onChangeText={setComment}\n                    autoCapitalize=\"none\"\n                    autoCorrect={false}\n                    returnKeyType=\"send\"\n                    autoFocus={commenting}\n                    onEndEditing={() => {\n                      setCommenting(false);\n                    }}\n                    onSubmitEditing={() => {\n                      Keyboard.dismiss();\n                      setCommenting(false);\n                    }}\n                  />\n                  <TouchableOpacity\n                    onPress={() => {\n                      if (comment != \"\") {\n                        Keyboard.dismiss();\n                        setCommenting(false);\n                        addComment(id, comment, setComment);\n                        getComments(id, setComments);\n                      }\n                    }}\n                  >\n                    <Icon\n                      name={\"paper-plane\"}\n                      size={24}\n                      color=\"rgba(0, 0, 0, .7)\"\n                    />\n                  </TouchableOpacity>\n                </View>\n              }\n            >\n              <View style={styles.commentModal}>\n                <FlatList\n                  showsVerticalScrollIndicator={false}\n                  data={comments}\n                  keyExtractor={(data) => {\n                    return data.id;\n                  }}\n                  renderItem={({ item }) => {\n                    return <CommentCard data={item} uid={uid} />;\n                  }}\n                />\n              </View>\n            </Modalize>\n          </Portal>\n        </>\n      )}\n    </View>\n  );\n};\n\nconst addComment = async (reel_id, description, setComment) => {\n  if (description == \"\") {\n    return;\n  }\n  const uid = await AsyncStorage.getItem(\"token\");\n  firebase\n    .firestore()\n    .collection(`reels/${reel_id}/comments`)\n    .add({\n      user: uid,\n      description: description,\n      timestamp: moment().unix().valueOf(),\n      upvotes: [],\n      num_upvotes: 0,\n      reel_id,\n    })\n    .then((docRef) => {\n      setComment(\"\");\n    })\n    .catch((error) => {\n      console.error(\"Error adding document: \", error);\n    });\n  return;\n};\n\nconst editVote = async (upvotes, id, setUpvoted) => {\n  const uid = await AsyncStorage.getItem(\"token\");\n  const reelsRef = firebase.firestore().collection(\"reels\");\n\n  let new_upvotes = upvotes;\n  if (upvotes.includes(uid)) {\n    new_upvotes.splice(new_upvotes.indexOf(uid), 1);\n    await reelsRef\n      .doc(id)\n      .update({ upvotes: new_upvotes, num_upvotes: new_upvotes.length });\n    setUpvoted(false);\n  } else {\n    // reel has not already been upvoted\n    new_upvotes.push(uid);\n    await reelsRef\n      .doc(id)\n      .update({ upvotes: new_upvotes, num_upvotes: new_upvotes.length });\n    setUpvoted(true);\n  }\n};\n\nconst getComments = async (id, setComments) => {\n  let comments = [];\n  await firebase\n    .firestore()\n    .collection(`reels/${id}/comments`)\n    .orderBy(\"num_upvotes\", \"desc\")\n    .orderBy(\"timestamp\", \"desc\")\n    .get()\n    .then((querySnapshot) => {\n      comments = querySnapshot.docs.map((doc) => {\n        let data_ = doc.data();\n        data_[\"id\"] = doc.id;\n        return data_;\n      });\n    });\n  setComments(comments);\n};\n\nconst styles = StyleSheet.create({\n  username: {\n    fontFamily: \"Raleway-ExtraBold\",\n    fontSize: 26,\n    marginTop: 8,\n  },\n  description: {\n    fontFamily: \"Raleway-Regular\",\n    fontSize: 14,\n    marginTop: 8,\n  },\n  tags: {\n    flexDirection: \"column\",\n    width: \"100%\",\n    marginTop: 8,\n  },\n  bottomContainer: {\n    position: \"absolute\",\n    bottom: 0,\n    left: 0,\n    right: 0,\n  },\n  commentRow: {\n    flexDirection: \"row-reverse\",\n    paddingLeft: 8,\n    alignItems: \"center\",\n  },\n  topRow: {\n    flexDirection: \"row-reverse\",\n    paddingLeft: 8,\n    paddingRight: 8,\n    alignItems: \"center\",\n  },\n  tagView: {\n    flex: 1,\n    marginRight: 8,\n  },\n  bottomRow: {\n    flexDirection: \"row-reverse\",\n    padding: 8,\n    alignItems: \"center\",\n  },\n  commentInput: {\n    flex: 1,\n    fontFamily: \"Raleway-Regular\",\n    color: \"rgba(0, 0, 0, 0.9)\",\n    fontSize: 14,\n  },\n  commentInputContainer: {\n    flex: 1,\n    backgroundColor: \"rgba(196, 196, 196, 0.7)\",\n    borderRadius: 8,\n    padding: 8,\n    marginRight: 8,\n  },\n  footer: {\n    flexDirection: \"row\",\n    backgroundColor: \"white\",\n    padding: 16,\n    paddingBottom: 24,\n    alignItems: \"center\",\n  },\n  commentModal: {\n    flexDirection: \"column\",\n  },\n  upvoteBox: {\n    flexDirection: \"column\",\n    alignItems: \"center\",\n    padding: 8,\n    marginRight: -8,\n  },\n  upvoteText: {\n    fontFamily: \"Raleway-Regular\",\n    fontSize: 13,\n    color: \"#86878B\",\n  },\n  adviceText: {\n    marginTop: 16,\n    padding: 16,\n    fontFamily: \"Raleway-Regular\",\n    fontSize: 15,\n    color: \"black\",\n  },\n});\n\nexport default ReelView;\n"]},"metadata":{},"sourceType":"script"}