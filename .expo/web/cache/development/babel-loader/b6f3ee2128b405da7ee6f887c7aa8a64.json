{"ast":null,"code":"var _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _View = _interopRequireDefault(require(\"react-native-web/dist/exports/View\"));\n\nvar _StyleSheet = _interopRequireDefault(require(\"react-native-web/dist/exports/StyleSheet\"));\n\nvar _reactNativeScreens = require(\"react-native-screens\");\n\nvar _createTabNavigator = _interopRequireDefault(require(\"../utils/createTabNavigator\"));\n\nvar _BottomTabBar = _interopRequireDefault(require(\"../views/BottomTabBar\"));\n\nvar _ResourceSavingScene = _interopRequireDefault(require(\"../views/ResourceSavingScene\"));\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2.default)(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2.default)(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2.default)(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar TabNavigationView = function (_React$PureComponent) {\n  (0, _inherits2.default)(TabNavigationView, _React$PureComponent);\n\n  var _super = _createSuper(TabNavigationView);\n\n  function TabNavigationView() {\n    var _this;\n\n    (0, _classCallCheck2.default)(this, TabNavigationView);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty((0, _assertThisInitialized2.default)(_this), \"state\", {\n      loaded: [_this.props.navigation.state.index]\n    });\n\n    _defineProperty((0, _assertThisInitialized2.default)(_this), \"_getButtonComponent\", function (_ref) {\n      var route = _ref.route;\n      var descriptors = _this.props.descriptors;\n      var descriptor = descriptors[route.key];\n      var options = descriptor.options;\n\n      if (options.tabBarButtonComponent) {\n        return options.tabBarButtonComponent;\n      }\n\n      return undefined;\n    });\n\n    _defineProperty((0, _assertThisInitialized2.default)(_this), \"_renderTabBar\", function () {\n      var _this$props = _this.props,\n          _this$props$tabBarCom = _this$props.tabBarComponent,\n          TabBarComponent = _this$props$tabBarCom === void 0 ? _BottomTabBar.default : _this$props$tabBarCom,\n          tabBarOptions = _this$props.tabBarOptions,\n          navigation = _this$props.navigation,\n          screenProps = _this$props.screenProps,\n          getLabelText = _this$props.getLabelText,\n          getAccessibilityLabel = _this$props.getAccessibilityLabel,\n          getAccessibilityRole = _this$props.getAccessibilityRole,\n          getAccessibilityStates = _this$props.getAccessibilityStates,\n          getTestID = _this$props.getTestID,\n          renderIcon = _this$props.renderIcon,\n          onTabPress = _this$props.onTabPress,\n          onTabLongPress = _this$props.onTabLongPress;\n      var descriptors = _this.props.descriptors;\n      var state = _this.props.navigation.state;\n      var route = state.routes[state.index];\n      var descriptor = descriptors[route.key];\n      var options = descriptor.options;\n\n      if (options.tabBarVisible === false) {\n        return null;\n      }\n\n      return React.createElement(TabBarComponent, _extends({}, tabBarOptions, {\n        jumpTo: _this._jumpTo,\n        navigation: navigation,\n        screenProps: screenProps,\n        onTabPress: onTabPress,\n        onTabLongPress: onTabLongPress,\n        getLabelText: getLabelText,\n        getButtonComponent: _this._getButtonComponent,\n        getAccessibilityLabel: getAccessibilityLabel,\n        getAccessibilityRole: getAccessibilityRole,\n        getAccessibilityStates: getAccessibilityStates,\n        getTestID: getTestID,\n        renderIcon: renderIcon\n      }));\n    });\n\n    _defineProperty((0, _assertThisInitialized2.default)(_this), \"_jumpTo\", function (key) {\n      var _this$props2 = _this.props,\n          navigation = _this$props2.navigation,\n          onIndexChange = _this$props2.onIndexChange;\n      var index = navigation.state.routes.findIndex(function (route) {\n        return route.key === key;\n      });\n      onIndexChange(index);\n    });\n\n    return _this;\n  }\n\n  (0, _createClass2.default)(TabNavigationView, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props3 = this.props,\n          navigation = _this$props3.navigation,\n          renderScene = _this$props3.renderScene,\n          lazy = _this$props3.lazy,\n          _this$props3$detachIn = _this$props3.detachInactiveScreens,\n          detachInactiveScreens = _this$props3$detachIn === void 0 ? true : _this$props3$detachIn;\n      var routes = navigation.state.routes;\n      var loaded = this.state.loaded;\n      return React.createElement(_View.default, {\n        style: styles.container\n      }, React.createElement(_reactNativeScreens.ScreenContainer, {\n        enabled: detachInactiveScreens,\n        style: styles.pages\n      }, routes.map(function (route, index) {\n        if (lazy && !loaded.includes(index)) {\n          return null;\n        }\n\n        var isFocused = navigation.state.index === index;\n        return React.createElement(_ResourceSavingScene.default, {\n          key: route.key,\n          style: _StyleSheet.default.absoluteFill,\n          isVisible: isFocused,\n          enabled: detachInactiveScreens\n        }, renderScene({\n          route: route\n        }));\n      })), this._renderTabBar());\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(nextProps, prevState) {\n      var index = nextProps.navigation.state.index;\n      return {\n        loaded: prevState.loaded.includes(index) ? prevState.loaded : [].concat((0, _toConsumableArray2.default)(prevState.loaded), [index])\n      };\n    }\n  }]);\n  return TabNavigationView;\n}(React.PureComponent);\n\n_defineProperty(TabNavigationView, \"defaultProps\", {\n  lazy: true,\n  getAccessibilityRole: function getAccessibilityRole() {\n    return 'button';\n  },\n  getAccessibilityStates: function getAccessibilityStates(_ref2) {\n    var focused = _ref2.focused;\n    return focused ? ['selected'] : [];\n  }\n});\n\nvar styles = _StyleSheet.default.create({\n  container: {\n    flex: 1,\n    overflow: 'hidden'\n  },\n  pages: {\n    flex: 1\n  }\n});\n\nvar _default = (0, _createTabNavigator.default)(TabNavigationView);\n\nexports.default = _default;","map":{"version":3,"sources":["createBottomTabNavigator.tsx"],"names":["TabNavigationView","React","lazy","getAccessibilityRole","getAccessibilityStates","focused","index","nextProps","loaded","prevState","route","descriptors","descriptor","options","tabBarComponent","TabBarComponent","onTabLongPress","state","renderIcon","key","onIndexChange","navigation","render","detachInactiveScreens","routes","styles","container","pages","isFocused","StyleSheet","renderScene","flex","overflow","createTabNavigator"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport { View, StyleSheet, AccessibilityRole } from 'react-native';\nimport { NavigationRoute } from 'react-navigation';\n\nimport { ScreenContainer } from 'react-native-screens';\n\nimport createTabNavigator, {\n  NavigationViewProps,\n} from '../utils/createTabNavigator';\nimport BottomTabBar from '../views/BottomTabBar';\nimport ResourceSavingScene from '../views/ResourceSavingScene';\nimport {\n  NavigationTabProp,\n  NavigationBottomTabOptions,\n  BottomTabBarOptions,\n  SceneDescriptorMap,\n} from '../types';\n\ntype Config = {\n  lazy?: boolean;\n  tabBarComponent?: React.ComponentType<any>;\n  tabBarOptions?: BottomTabBarOptions;\n  detachInactiveScreens?: boolean;\n};\n\ntype Props = NavigationViewProps &\n  Config & {\n    getAccessibilityRole: (props: {\n      route: NavigationRoute;\n    }) => AccessibilityRole | undefined;\n    getAccessibilityStates: (props: {\n      route: NavigationRoute;\n      focused: boolean;\n    }) => string[];\n    navigation: NavigationTabProp;\n    descriptors: SceneDescriptorMap;\n    screenProps?: unknown;\n  };\n\ntype State = {\n  loaded: number[];\n};\n\nclass TabNavigationView extends React.PureComponent<Props, State> {\n  static defaultProps = {\n    lazy: true,\n    getAccessibilityRole: (): AccessibilityRole => 'button',\n    getAccessibilityStates: ({ focused }: { focused: boolean }) =>\n      focused ? ['selected'] : [],\n  };\n\n  static getDerivedStateFromProps(nextProps: Props, prevState: State) {\n    const { index } = nextProps.navigation.state;\n\n    return {\n      // Set the current tab to be loaded if it was not loaded before\n      loaded: prevState.loaded.includes(index)\n        ? prevState.loaded\n        : [...prevState.loaded, index],\n    };\n  }\n\n  state = {\n    loaded: [this.props.navigation.state.index],\n  };\n\n  _getButtonComponent = ({ route }: { route: NavigationRoute }) => {\n    const { descriptors } = this.props;\n    const descriptor = descriptors[route.key];\n    const options = descriptor.options;\n\n    if (options.tabBarButtonComponent) {\n      return options.tabBarButtonComponent;\n    }\n\n    return undefined;\n  };\n\n  _renderTabBar = () => {\n    const {\n      tabBarComponent: TabBarComponent = BottomTabBar,\n      tabBarOptions,\n      navigation,\n      screenProps,\n      getLabelText,\n      getAccessibilityLabel,\n      getAccessibilityRole,\n      getAccessibilityStates,\n      getTestID,\n      renderIcon,\n      onTabPress,\n      onTabLongPress,\n    } = this.props;\n\n    const { descriptors } = this.props;\n    const { state } = this.props.navigation;\n    const route = state.routes[state.index];\n    const descriptor = descriptors[route.key];\n    const options = descriptor.options;\n\n    if (options.tabBarVisible === false) {\n      return null;\n    }\n\n    return (\n      <TabBarComponent\n        {...tabBarOptions}\n        jumpTo={this._jumpTo}\n        navigation={navigation}\n        screenProps={screenProps}\n        onTabPress={onTabPress}\n        onTabLongPress={onTabLongPress}\n        getLabelText={getLabelText}\n        getButtonComponent={this._getButtonComponent}\n        getAccessibilityLabel={getAccessibilityLabel}\n        getAccessibilityRole={getAccessibilityRole}\n        getAccessibilityStates={getAccessibilityStates}\n        getTestID={getTestID}\n        renderIcon={renderIcon}\n      />\n    );\n  };\n\n  _jumpTo = (key: string) => {\n    const { navigation, onIndexChange } = this.props;\n\n    const index = navigation.state.routes.findIndex(\n      (route) => route.key === key\n    );\n\n    onIndexChange(index);\n  };\n\n  render() {\n    const {\n      navigation,\n      renderScene,\n      lazy,\n      detachInactiveScreens = true,\n    } = this.props;\n    const { routes } = navigation.state;\n    const { loaded } = this.state;\n\n    return (\n      <View style={styles.container}>\n        {/* @ts-ignore */}\n        <ScreenContainer enabled={detachInactiveScreens} style={styles.pages}>\n          {routes.map((route, index) => {\n            if (lazy && !loaded.includes(index)) {\n              // Don't render a screen if we've never navigated to it\n              return null;\n            }\n\n            const isFocused = navigation.state.index === index;\n\n            return (\n              <ResourceSavingScene\n                key={route.key}\n                style={StyleSheet.absoluteFill}\n                isVisible={isFocused}\n                enabled={detachInactiveScreens}\n              >\n                {renderScene({ route })}\n              </ResourceSavingScene>\n            );\n          })}\n        </ScreenContainer>\n        {this._renderTabBar()}\n      </View>\n    );\n  }\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    overflow: 'hidden',\n  },\n  pages: {\n    flex: 1,\n  },\n});\n\nexport default createTabNavigator<Config, NavigationBottomTabOptions, Props>(\n  TabNavigationView\n);\n"]},"metadata":{},"sourceType":"script"}